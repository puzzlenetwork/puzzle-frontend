const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./native-DHtYkoli.js","./index-FsQqLLKN.js","./index-GCvYoYE8.css"])))=>i.map(i=>d[i]);
import{W as at,X as rt,Y as vs,Z as Es,$ as St,a0 as q,a1 as N,p as Pt,a2 as Z,a3 as De,e as It,a4 as U,a5 as te,m as z,I as V,a6 as xe,a7 as we,a8 as Tt,B as ve,a9 as Ss,aa as Ge,ab as B,ac as Ps,ad as Is,ae as Ts,af as At,ag as Ct,r as g,k as se,ah as D,ai as Rt,aj as Bt,ak as Lt,al as ze,am as Ve,an as W,S as be,ao as kt,z as Y,ap as je,h as y,aq as As,ar as Cs,as as le,at as nt,au as Rs,av as Mt,aw as Ot,ax as Bs,ay as ee,_ as Ls,az as Fe,aA as $e,aB as ks,aC as We,aD as Ms,aE as ae,F as Ht,G as jt,aF as Os,i as Ee,aG as Ft,aH as X,aI as I,aJ as qe,aK as Ke,aL as qt,aM as Nt,aN as Ut,aO as Hs,aP as Je,aQ as Dt,aR as Gt,c as zt,aS as Vt,aT as $t,aU as Ne,aV as Wt,aW as Kt,C as Jt,aX as js,aY as Fs,aZ as qs,a_ as Ns,a$ as Us,A as Ds,b0 as Gs,b1 as zs,b2 as Vs,b3 as $s,b4 as Ws,b5 as Ks,b6 as Js,b7 as Ys,b8 as Xs,b9 as Qs,ba as Zs,bb as ea,bc as ta,bd as sa,be as aa,bf as ra,u as na,bg as oa,bh as ia,bi as ca,bj as ua,bk as da,bl as la,bm as fa,bn as ha,bo as ma,bp as ga,bq as pa,br as ya,bs as ba,bt as _a,bu as xa,bv as wa,bw as va,bx as Ea,by as Sa,E as Pa,bz as Ia,bA as Ta,bB as Aa,H as Ca,bC as Ra,bD as Ba,bE as La,bF as ka,bG as Ma,bH as Oa,bI as Ha,bJ as ja,bK as Fa,bL as qa,bM as Na,bN as Ua,bO as Da,bP as Ga,bQ as za,bR as Va,bS as $a,bT as Wa,bU as Ka,bV as Ja,bW as Ya,bX as Xa,bY as Qa,bZ as Za,b_ as er,b$ as tr,c0 as sr,c1 as ar,c2 as rr,c3 as nr,c4 as or,c5 as ir,c6 as cr,c7 as ur,c8 as dr,c9 as lr,ca as fr,cb as hr,cc as mr,cd as gr,ce as pr,cf as yr,cg as br,ch as _r,ci as xr,cj as wr,ck as vr,cl as Er,cm as Sr,cn as Pr,co as Ir,cp as Tr,T as Ar,cq as Cr,cr as Rr,cs as Br,ct as Lr,cu as kr,cv as Mr,cw as Or,cx as Hr,cy as jr,x as Fr,cz as qr,U as Nr,cA as Ur,cB as Dr,cC as Gr,cD as zr,cE as Vr,o as $r,cF as Wr,cG as Kr,cH as Jr,cI as Yr,cJ as Xr,cK as Qr,cL as Zr,cM as en,cN as tn,d as sn,cO as an,cP as rn,cQ as nn,cR as on,cS as cn,cT as un,cU as dn,cV as ln,cW as fn,cX as hn,cY as mn,f as gn,cZ as pn,c_ as yn,c$ as bn,D as _n,d0 as xn,d1 as wn,d2 as vn,d3 as En,d4 as Sn,d5 as ot,d6 as it,d7 as Pn,d8 as In,d9 as Tn,da as An,db as Cn,dc as Rn,dd as Bn,de as Ln,N as kn,df as Mn,dg as On,dh as Hn,di as jn,dj as Fn,dk as qn,dl as ct,dm as fe,dn as ut,dp as Nn,dq as Un,dr as Dn,ds as Gn,dt as zn,du as Vn,R as $n,dv as Wn,dw as Kn,dx as Jn,dy as Yn,dz as Xn,dA as Qn,dB as Zn,dC as eo,dD as to,dE as so,dF as ao,dG as ro,dH as no,dI as oo,dJ as io,dK as co,dL as uo,dM as lo,dN as fo,dO as ho,dP as mo,dQ as go,dR as po,dS as yo,dT as bo,dU as _o,dV as xo,dW as wo,dX as vo,dY as Eo,dZ as So,d_ as Po,d$ as Io,e0 as To,e1 as Ao,e2 as Co,e3 as Ro,e4 as Bo,e5 as Lo,e6 as ko,e7 as Mo,e8 as Oo,e9 as Ho,ea as jo,eb as Fo,ec as qo,ed as No,ee as Uo,ef as Do,eg as Go,eh as zo,ei as Vo,ej as $o,ek as Wo,el as Ko,em as Jo,en as Yo,eo as Xo,ep as Qo,eq as Zo,er as ei,es as ti,et as si,eu as ai,ev as ri,ew as ni,ex as oi,ey as ii,ez as ci,eA as ui,eB as di,eC as li,eD as fi,eE as hi,eF as mi,eG as gi,eH as pi,eI as yi,eJ as bi,eK as _i,eL as xi,eM as wi,eN as vi,eO as Ei,eP as Si,eQ as Pi,eR as Ii,eS as Ti,eT as Ai,eU as Ci,eV as Ri,eW as Bi,eX as Li,eY as ki,eZ as Mi,e_ as Oi,e$ as Hi,f0 as ji,f1 as Fi,f2 as qi,f3 as Ni,f4 as Ui,f5 as Di,f6 as Gi,f7 as zi,f8 as Vi,f9 as $i,fa as Wi,fb as Ki,fc as Ji,fd as dt,fe as Yi,ff as Xi,fg as Qi,fh as Zi,fi as ec,n as tc,s as sc,fj as ac,fk as lt,fl as rc,fm as nc,fn as oc,fo as ic,fp as cc,fq as uc,fr as dc,J as A,V as lc,P as fc,K as hc}from"./index-FsQqLLKN.js";import{d as mc}from"./index-COGjM5PN.js";import{f as gc,s as pc}from"./fallback-Dx5zugVB.js";import{e as yc,c as bc,a as _c,p as ft,n as xc,s as wc,z as vc}from"./parseSignature-BnNgKFeu.js";import{ccipRequest as ht,offchainLookup as Ec,offchainLookupAbiItem as Sc,offchainLookupSignature as Pc}from"./ccip-NTYwAbz-.js";function Ic(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const r in a)if(r!=="default"&&!(r in e)){const n=Object.getOwnPropertyDescriptor(a,r);n&&Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>a[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Tc(e){let t;if(typeof e=="string")t=at(e,{modifiers:rt});else{const s=vs(e),a=e.length;for(let r=0;r<a;r++){const n=e[r];if(!Es(n)){t=at(n,{modifiers:rt,structs:s});break}}}if(!t)throw new St({param:e});return t}function Ue(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Ac(e){return e.opcode==="CREATE2"?Xt(e):Yt(e)}function Yt(e){const t=q(N(e.from));let s=q(e.nonce);return s[0]===0&&(s=new Uint8Array([])),N(`0x${Z(U([t,s],"bytes")).slice(26)}`)}function Xt(e){const t=q(N(e.from)),s=Pt(Ue(e.salt)?e.salt:q(e.salt),{size:32}),a="bytecodeHash"in e?Ue(e.bytecodeHash)?e.bytecodeHash:q(e.bytecodeHash):Z(e.bytecode,"bytes");return N(De(Z(It([q("0xff"),t,s,a])),12))}function Qt(e){const{authorizationList:t}=e;if(t)for(const s of t){const{chainId:a}=s,r=s.address;if(!z(r))throw new V({address:r});if(a<0)throw new te({chainId:a})}re(e)}function Zt(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Ss;for(const s of t){const a=Ge(s),r=B(De(s,0,1));if(a!==32)throw new Ps({hash:s,size:a});if(r!==Is)throw new Ts({hash:s,version:r})}}re(e)}function re(e){const{chainId:t,maxPriorityFeePerGas:s,maxFeePerGas:a,to:r}=e;if(t<=0)throw new te({chainId:t});if(r&&!z(r))throw new V({address:r});if(a&&a>xe)throw new we({maxFeePerGas:a});if(s&&a&&s>a)throw new Tt({maxFeePerGas:a,maxPriorityFeePerGas:s})}function Ye(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:r,to:n}=e;if(t<=0)throw new te({chainId:t});if(n&&!z(n))throw new V({address:n});if(s||r)throw new ve("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(a&&a>xe)throw new we({maxFeePerGas:a})}function Xe(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:r,to:n}=e;if(n&&!z(n))throw new V({address:n});if(typeof t<"u"&&t<=0)throw new te({chainId:t});if(s||r)throw new ve("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(a&&a>xe)throw new we({maxFeePerGas:a})}function ne(e){if(!e||e.length===0)return[];const t=[];for(let s=0;s<e.length;s++){const{address:a,storageKeys:r}=e[s];for(let n=0;n<r.length;n++)if(r[n].length-2!==64)throw new At({storageKey:r[n]});if(!z(a,{strict:!1}))throw new V({address:a});t.push([a,r])}return t}function es(e,t){const s=Ct(e);return s==="eip1559"?Bc(e,t):s==="eip2930"?Lc(e,t):s==="eip4844"?Rc(e,t):s==="eip7702"?Cc(e,t):kc(e,t)}function Cc(e,t){const{authorizationList:s,chainId:a,gas:r,nonce:n,to:i,value:u,maxFeePerGas:c,maxPriorityFeePerGas:o,accessList:f,data:l}=e;Qt(e);const h=ne(f),d=Mc(s);return se(["0x04",U([g(a),n?g(n):"0x",o?g(o):"0x",c?g(c):"0x",r?g(r):"0x",i??"0x",u?g(u):"0x",l??"0x",h,d,...oe(e,t)])])}function Rc(e,t){const{chainId:s,gas:a,nonce:r,to:n,value:i,maxFeePerBlobGas:u,maxFeePerGas:c,maxPriorityFeePerGas:o,accessList:f,data:l}=e;Zt(e);let h=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof h>"u"||typeof d>"u")){const x=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(w=>D(w)),C=e.kzg,v=Rt({blobs:x,kzg:C});if(typeof h>"u"&&(h=Bt({commitments:v})),typeof d>"u"){const w=Lt({blobs:x,commitments:v,kzg:C});d=ze({blobs:x,commitments:v,proofs:w})}}const m=ne(f),p=[g(s),r?g(r):"0x",o?g(o):"0x",c?g(c):"0x",a?g(a):"0x",n??"0x",i?g(i):"0x",l??"0x",m,u?g(u):"0x",h??[],...oe(e,t)],_=[],E=[],b=[];if(d)for(let x=0;x<d.length;x++){const{blob:C,commitment:v,proof:w}=d[x];_.push(C),E.push(v),b.push(w)}return se(["0x03",d?U([p,_,E,b]):U(p)])}function Bc(e,t){const{chainId:s,gas:a,nonce:r,to:n,value:i,maxFeePerGas:u,maxPriorityFeePerGas:c,accessList:o,data:f}=e;re(e);const l=ne(o),h=[g(s),r?g(r):"0x",c?g(c):"0x",u?g(u):"0x",a?g(a):"0x",n??"0x",i?g(i):"0x",f??"0x",l,...oe(e,t)];return se(["0x02",U(h)])}function Lc(e,t){const{chainId:s,gas:a,data:r,nonce:n,to:i,value:u,accessList:c,gasPrice:o}=e;Ye(e);const f=ne(c),l=[g(s),n?g(n):"0x",o?g(o):"0x",a?g(a):"0x",i??"0x",u?g(u):"0x",r??"0x",f,...oe(e,t)];return se(["0x01",U(l)])}function kc(e,t){const{chainId:s=0,gas:a,data:r,nonce:n,to:i,value:u,gasPrice:c}=e;Xe(e);let o=[n?g(n):"0x",c?g(c):"0x",a?g(a):"0x",i??"0x",u?g(u):"0x",r??"0x"];if(t){const f=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(s>0)return BigInt(s*2)+BigInt(35n+t.v-27n);const d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new Ve({v:t.v});return d})(),l=W(t.r),h=W(t.s);o=[...o,g(f),l==="0x00"?"0x":l,h==="0x00"?"0x":h]}else s>0&&(o=[...o,g(s),"0x","0x"]);return U(o)}function oe(e,t){const s=t??e,{v:a,yParity:r}=s;if(typeof s.r>"u")return[];if(typeof s.s>"u")return[];if(typeof a>"u"&&typeof r>"u")return[];const n=W(s.r),i=W(s.s);return[typeof r=="number"?r?g(1):"0x":a===0n?"0x":a===1n?g(1):a===27n?"0x":g(1),n==="0x00"?"0x":n,i==="0x00"?"0x":i]}function Mc(e){if(!e||e.length===0)return[];const t=[];for(const s of e){const{chainId:a,nonce:r,...n}=s,i=s.address;t.push([a?be(a):"0x",i,r?be(r):"0x",...oe({},n)])}return t}function Oc({chains:e,id:t}){return e.find(s=>s.id===t)}function Qe(e,t="hex"){const s=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new kt(e);return Y(e)}return e})(),a=je(s,{recursiveReadLimit:Number.POSITIVE_INFINITY});return ts(a,t)}function ts(e,t="hex"){if(e.bytes.length===0)return t==="hex"?D(e.bytes):e.bytes;const s=e.readByte();if(s<128&&e.decrementPosition(1),s<192){const r=mt(e,s,128),n=e.readBytes(r);return t==="hex"?D(n):n}const a=mt(e,s,192);return Hc(e,a,t)}function mt(e,t,s){if(s===128&&t<128)return 1;if(t<=s+55)return t-s;if(t===s+55+1)return e.readUint8();if(t===s+55+2)return e.readUint16();if(t===s+55+3)return e.readUint24();if(t===s+55+4)return e.readUint32();throw new ve("Invalid RLP prefix")}function Hc(e,t,s){const a=e.position,r=[];for(;e.position-a<t;)r.push(ts(e,s));return r}function ss(e){return y(e)&&Ge(e)===32}const jc=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),as=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),Fc=as.map(e=>(9*e+5)%16),rs=(()=>{const s=[[as],[Fc]];for(let a=0;a<4;a++)for(let r of s)r.push(r[a].map(n=>jc[n]));return s})(),ns=rs[0],os=rs[1],is=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),qc=ns.map((e,t)=>e.map(s=>is[t][s])),Nc=os.map((e,t)=>e.map(s=>is[t][s])),Uc=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),Dc=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function gt(e,t,s,a){return e===0?t^s^a:e===1?t&s|~t&a:e===2?(t|~s)^a:e===3?t&a|s&~a:t^(s|~a)}const he=new Uint32Array(16);class Gc extends Cs{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:s,h2:a,h3:r,h4:n}=this;return[t,s,a,r,n]}set(t,s,a,r,n){this.h0=t|0,this.h1=s|0,this.h2=a|0,this.h3=r|0,this.h4=n|0}process(t,s){for(let d=0;d<16;d++,s+=4)he[d]=t.getUint32(s,!0);let a=this.h0|0,r=a,n=this.h1|0,i=n,u=this.h2|0,c=u,o=this.h3|0,f=o,l=this.h4|0,h=l;for(let d=0;d<5;d++){const m=4-d,p=Uc[d],_=Dc[d],E=ns[d],b=os[d],x=qc[d],C=Nc[d];for(let v=0;v<16;v++){const w=le(a+gt(d,n,u,o)+he[E[v]]+p,x[v])+l|0;a=l,l=o,o=le(u,10)|0,u=n,n=w}for(let v=0;v<16;v++){const w=le(r+gt(m,i,c,f)+he[b[v]]+_,C[v])+h|0;r=h,h=f,f=le(c,10)|0,c=i,i=w}}this.set(this.h1+u+f|0,this.h2+o+h|0,this.h3+l+r|0,this.h4+a+i|0,this.h0+n+c|0)}roundClean(){nt(he)}destroy(){this.destroyed=!0,nt(this.buffer),this.set(0,0,0,0,0)}}const zc=As(()=>new Gc),Vc=zc;function $c(e,t){const s=t||"hex",a=Vc(y(e,{strict:!1})?q(e):e);return s==="bytes"?a:be(a)}const Me=new Map;async function Wc(e){const{getSocket:t,keepAlive:s=!0,key:a="socket",reconnect:r=!0,url:n}=e,{interval:i=3e4}=typeof s=="object"?s:{},{attempts:u=5,delay:c=2e3}=typeof r=="object"?r:{},o=JSON.stringify({keepAlive:s,key:a,url:n,reconnect:r});let f=Me.get(o);if(f)return f;let l=0;const{schedule:h}=Rs({id:o,fn:async()=>{const p=new Map,_=new Map;let E,b,x,C=!1;function v(){if(r&&l<u){if(C)return;C=!0,l++,b==null||b.close(),setTimeout(async()=>{await w().catch(console.error),C=!1},c)}else p.clear(),_.clear()}async function w(){const S=await t({onClose(){var P,L;for(const T of p.values())(P=T.onError)==null||P.call(T,new ee({url:n}));for(const T of _.values())(L=T.onError)==null||L.call(T,new ee({url:n}));v()},onError(P){var L,T;E=P;for(const R of p.values())(L=R.onError)==null||L.call(R,E);for(const R of _.values())(T=R.onError)==null||T.call(R,E);v()},onOpen(){E=void 0,l=0},onResponse(P){const L=P.method==="eth_subscription",T=L?P.params.subscription:P.id,R=L?_:p,M=R.get(T);M&&M.onResponse(P),L||R.delete(T)}});if(b=S,s&&(x&&clearInterval(x),x=setInterval(()=>{var P;return(P=b.ping)==null?void 0:P.call(b)},i)),r&&_.size>0){const P=_.entries();for(const[L,{onResponse:T,body:R,onError:M}]of P)R&&(_.delete(L),f==null||f.request({body:R,onResponse:T,onError:M}))}return S}return await w(),E=void 0,f={close(){x&&clearInterval(x),b.close(),Me.delete(o)},get socket(){return b},request({body:S,onError:P,onResponse:L}){E&&P&&P(E);const T=S.id??Bs.take(),R=M=>{var st;typeof M.id=="number"&&T!==M.id||(S.method==="eth_subscribe"&&typeof M.result=="string"&&_.set(M.result,{onResponse:R,onError:P,body:S}),S.method==="eth_unsubscribe"&&_.delete((st=S.params)==null?void 0:st[0]),L(M))};p.set(T,{onResponse:R,onError:P});try{b.request({body:{jsonrpc:"2.0",id:T,...S}})}catch(M){P==null||P(M)}},requestAsync({body:S,timeout:P=1e4}){return Mt(()=>new Promise((L,T)=>this.request({body:S,onError:T,onResponse:L})),{errorInstance:new Ot({body:S,url:n}),timeout:P})},requests:p,subscriptions:_,url:n},Me.set(o,f),[f]}}),[d,[m]]=await h();return m}async function ye(e,t={}){const{keepAlive:s,reconnect:a}=t;return Wc({async getSocket({onClose:r,onError:n,onOpen:i,onResponse:u}){const c=await Ls(()=>import("./native-DHtYkoli.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(d=>d.WebSocket),o=new c(e);function f(){o.removeEventListener("close",f),o.removeEventListener("message",l),o.removeEventListener("error",n),o.removeEventListener("open",i),r()}function l({data:d}){try{const m=JSON.parse(d);u(m)}catch(m){n(m)}}o.addEventListener("close",f),o.addEventListener("message",l),o.addEventListener("error",n),o.addEventListener("open",i),o.readyState===c.CONNECTING&&await new Promise((d,m)=>{o&&(o.onopen=d,o.onerror=m)});const{close:h}=o;return Object.assign(o,{close(){h.bind(o)(),f()},ping(){try{if(o.readyState===o.CLOSED||o.readyState===o.CLOSING)throw new Fe({url:o.url,cause:new ee({url:o.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};o.send(JSON.stringify(d))}catch(d){n(d)}},request({body:d}){if(o.readyState===o.CLOSED||o.readyState===o.CLOSING)throw new Fe({body:d,url:o.url,cause:new ee({url:o.url})});return o.send(JSON.stringify(d))}})},keepAlive:s,reconnect:a,url:e})}async function Kc(e){const t=await ye(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function cs(e){return $e(e,-32)===yc}function us(e){return ks(e)}function Jc(e){if(!cs(e))return{signature:e};const[t,s,a]=We([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:s,signature:a}}function Yc(e){if(!us(e))return{signature:e};const{authorization:t,to:s,...a}=Ms(e);return{authorization:{address:t.address,chainId:t.chainId,nonce:Number(t.nonce),r:g(t.r,{size:32}),s:g(t.s,{size:32}),yParity:t.yParity},...s?{address:s}:{},...a}}async function ds({message:e,signature:t}){return ae({hash:Ht(e),signature:t})}async function ls(e){const{domain:t,message:s,primaryType:a,signature:r,types:n}=e;return ae({hash:jt({domain:t,message:s,primaryType:a,types:n}),signature:r})}function Xc(e){const{address:t,data:s,signature:a,to:r="hex"}=e,n=Os({authorization:{address:e.authorization.address,chainId:e.authorization.chainId,nonce:BigInt(e.authorization.nonce),r:BigInt(e.authorization.r),s:BigInt(e.authorization.s),yParity:e.authorization.yParity},data:s,signature:a,to:t});return r==="hex"?n:Y(n)}async function Qc({address:e,hash:t,signature:s}){return Ee(N(e),await ae({hash:t,signature:s}))}async function Zc({address:e,message:t,signature:s}){return Ee(N(e),await ds({message:t,signature:s}))}async function eu(e){const{address:t,domain:s,message:a,primaryType:r,signature:n,types:i}=e;return Ee(N(t),await ls({domain:s,message:a,primaryType:r,signature:n,types:i}))}function fs(e){const t=$e(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&B(t)>=192)return"legacy";throw new Ft({serializedType:t})}function hs(e){const t=fs(e);return t==="eip1559"?au(e):t==="eip2930"?ru(e):t==="eip4844"?su(e):t==="eip7702"?tu(e):nu(e)}function tu(e){const t=Se(e),[s,a,r,n,i,u,c,o,f,l,h,d,m]=t;if(t.length!==10&&t.length!==13)throw new X({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:r,maxFeePerGas:n,gas:i,to:u,value:c,data:o,accessList:f,authorizationList:l,...t.length>9?{v:h,r:d,s:m}:{}},serializedTransaction:e,type:"eip7702"});const p={chainId:B(s),type:"eip7702"};return y(u)&&u!=="0x"&&(p.to=u),y(i)&&i!=="0x"&&(p.gas=I(i)),y(o)&&o!=="0x"&&(p.data=o),y(a)&&(p.nonce=a==="0x"?0:B(a)),y(c)&&c!=="0x"&&(p.value=I(c)),y(n)&&n!=="0x"&&(p.maxFeePerGas=I(n)),y(r)&&r!=="0x"&&(p.maxPriorityFeePerGas=I(r)),f.length!==0&&f!=="0x"&&(p.accessList=Pe(f)),l.length!==0&&l!=="0x"&&(p.authorizationList=ou(l)),Qt(p),{...t.length===13?ie(t):void 0,...p}}function su(e){const t=Se(e),s=t.length===4,a=s?t[0]:t,r=s?t.slice(1):[],[n,i,u,c,o,f,l,h,d,m,p,_,E,b]=a,[x,C,v]=r;if(!(a.length===11||a.length===14))throw new X({attributes:{chainId:n,nonce:i,maxPriorityFeePerGas:u,maxFeePerGas:c,gas:o,to:f,value:l,data:h,accessList:d,...a.length>9?{v:_,r:E,s:b}:{}},serializedTransaction:e,type:"eip4844"});const w={blobVersionedHashes:p,chainId:B(n),type:"eip4844"};return y(f)&&f!=="0x"&&(w.to=f),y(o)&&o!=="0x"&&(w.gas=I(o)),y(h)&&h!=="0x"&&(w.data=h),y(i)&&(w.nonce=i==="0x"?0:B(i)),y(l)&&l!=="0x"&&(w.value=I(l)),y(m)&&m!=="0x"&&(w.maxFeePerBlobGas=I(m)),y(c)&&c!=="0x"&&(w.maxFeePerGas=I(c)),y(u)&&u!=="0x"&&(w.maxPriorityFeePerGas=I(u)),d.length!==0&&d!=="0x"&&(w.accessList=Pe(d)),x&&C&&v&&(w.sidecars=ze({blobs:x,commitments:C,proofs:v})),Zt(w),{...a.length===14?ie(a):void 0,...w}}function au(e){const t=Se(e),[s,a,r,n,i,u,c,o,f,l,h,d]=t;if(!(t.length===9||t.length===12))throw new X({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:r,maxFeePerGas:n,gas:i,to:u,value:c,data:o,accessList:f,...t.length>9?{v:l,r:h,s:d}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:B(s),type:"eip1559"};return y(u)&&u!=="0x"&&(m.to=u),y(i)&&i!=="0x"&&(m.gas=I(i)),y(o)&&o!=="0x"&&(m.data=o),y(a)&&(m.nonce=a==="0x"?0:B(a)),y(c)&&c!=="0x"&&(m.value=I(c)),y(n)&&n!=="0x"&&(m.maxFeePerGas=I(n)),y(r)&&r!=="0x"&&(m.maxPriorityFeePerGas=I(r)),f.length!==0&&f!=="0x"&&(m.accessList=Pe(f)),re(m),{...t.length===12?ie(t):void 0,...m}}function ru(e){const t=Se(e),[s,a,r,n,i,u,c,o,f,l,h]=t;if(!(t.length===8||t.length===11))throw new X({attributes:{chainId:s,nonce:a,gasPrice:r,gas:n,to:i,value:u,data:c,accessList:o,...t.length>8?{v:f,r:l,s:h}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:B(s),type:"eip2930"};return y(i)&&i!=="0x"&&(d.to=i),y(n)&&n!=="0x"&&(d.gas=I(n)),y(c)&&c!=="0x"&&(d.data=c),y(a)&&(d.nonce=a==="0x"?0:B(a)),y(u)&&u!=="0x"&&(d.value=I(u)),y(r)&&r!=="0x"&&(d.gasPrice=I(r)),o.length!==0&&o!=="0x"&&(d.accessList=Pe(o)),Ye(d),{...t.length===11?ie(t):void 0,...d}}function nu(e){const t=Qe(e,"hex"),[s,a,r,n,i,u,c,o,f]=t;if(!(t.length===6||t.length===9))throw new X({attributes:{nonce:s,gasPrice:a,gas:r,to:n,value:i,data:u,...t.length>6?{v:c,r:o,s:f}:{}},serializedTransaction:e,type:"legacy"});const l={type:"legacy"};if(y(n)&&n!=="0x"&&(l.to=n),y(r)&&r!=="0x"&&(l.gas=I(r)),y(u)&&u!=="0x"&&(l.data=u),y(s)&&(l.nonce=s==="0x"?0:B(s)),y(i)&&i!=="0x"&&(l.value=I(i)),y(a)&&a!=="0x"&&(l.gasPrice=I(a)),Xe(l),t.length===6)return l;const h=y(c)&&c!=="0x"?I(c):0n;if(f==="0x"&&o==="0x")return h>0&&(l.chainId=Number(h)),l;const d=h,m=Number((d-35n)/2n);if(m>0)l.chainId=m;else if(d!==27n&&d!==28n)throw new Ve({v:d});return l.v=d,l.s=f,l.r=o,l.yParity=d%2n===0n?1:0,l}function Se(e){return Qe(`0x${e.slice(4)}`,"hex")}function Pe(e){const t=[];for(let s=0;s<e.length;s++){const[a,r]=e[s];if(!z(a,{strict:!1}))throw new V({address:a});t.push({address:a,storageKeys:r.map(n=>ss(n)?n:W(n))})}return t}function ou(e){const t=[];for(let s=0;s<e.length;s++){const[a,r,n,i,u,c]=e[s];t.push({address:r,chainId:a==="0x"?0:B(a),nonce:n==="0x"?0:B(n),...ie([i,u,c])})}return t}function ie(e){const t=e.slice(-3),s=t[0]==="0x"||I(t[0])===0n?27n:28n;return{r:qe(t[1],{size:32}),s:qe(t[2],{size:32}),v:s,yParity:s===27n?0:1}}function iu(e,t="wei"){return Ke(e,qt[t])}function cu(e,t="wei"){return Ke(e,Nt[t])}async function uu(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function du(e){return e.request({method:`${e.mode}_dumpState`})}async function lu(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function fu(e){return await e.request({method:"txpool_content"})}async function hu(e){const{pending:t,queued:s}=await e.request({method:"txpool_status"});return{pending:B(t),queued:B(s)}}async function mu(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function gu(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[g(t)]})}async function pu(e){return await e.request({method:"txpool_inspect"})}async function yu(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function bu(e,{blocks:t,interval:s}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:g(t)}]}):await e.request({method:`${e.mode}_mine`,params:[g(t),g(s||0)]})}async function _u(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function xu(e,{blockNumber:t,jsonRpcUrl:s}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:s}}]})}async function wu(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function vu(e,t){var E,b,x;const{accessList:s,data:a,from:r,gas:n,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:c,nonce:o,to:f,value:l,...h}=t,d=(x=(b=(E=e.chain)==null?void 0:E.formatters)==null?void 0:b.transactionRequest)==null?void 0:x.format,p=(d||Ut)({...Hs(h,{format:d}),accessList:s,data:a,from:r,gas:n,gasPrice:i,maxFeePerGas:u,maxPriorityFeePerGas:c,nonce:o,to:f,value:l});return await e.request({method:"eth_sendUnsignedTransaction",params:[p]})}async function Eu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function Su(e,{address:t,value:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,g(s)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,g(s)]})}async function Pu(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[g(t)]})}async function Iu(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[s]})}async function Tu(e,{address:t,bytecode:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,s]}):await e.request({method:`${e.mode}_setCode`,params:[t,s]})}async function Au(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Cu(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[s]})}async function Ru(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Bu(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[g(t)]})}async function Lu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[g(t)]})}async function ku(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[g(t)]})}async function Mu(e,{address:t,nonce:s}){await e.request({method:`${e.mode}_setNonce`,params:[t,g(s)]})}async function Ou(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function Hu(e,{address:t,index:s,value:a}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof s=="number"?g(s):s,a]})}async function ju(e){return await e.request({method:"evm_snapshot"})}async function Fu(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}function ms({mode:e}){return t=>{const s=t.extend(()=>({mode:e}));return{dropTransaction:a=>uu(s,a),dumpState:()=>du(s),getAutomine:()=>lu(s),getTxpoolContent:()=>fu(s),getTxpoolStatus:()=>hu(s),impersonateAccount:a=>mu(s,a),increaseTime:a=>gu(s,a),inspectTxpool:()=>pu(s),loadState:a=>yu(s,a),mine:a=>bu(s,a),removeBlockTimestampInterval:()=>_u(s),reset:a=>xu(s,a),revert:a=>wu(s,a),sendUnsignedTransaction:a=>vu(s,a),setAutomine:a=>Eu(s,a),setBalance:a=>Su(s,a),setBlockGasLimit:a=>Pu(s,a),setBlockTimestampInterval:a=>Iu(s,a),setCode:a=>Tu(s,a),setCoinbase:a=>Au(s,a),setIntervalMining:a=>Cu(s,a),setLoggingEnabled:a=>Ru(s,a),setMinGasPrice:a=>Bu(s,a),setNextBlockBaseFeePerGas:a=>Lu(s,a),setNextBlockTimestamp:a=>ku(s,a),setNonce:a=>Mu(s,a),setRpcUrl:a=>Ou(s,a),setStorageAt:a=>Hu(s,a),snapshot:()=>ju(s),stopImpersonatingAccount:a=>Fu(s,a)}}}function qu(e){const{key:t="test",name:s="Test Client",mode:a}=e;return Je({...e,key:t,name:s,type:"testClient"}).extend(n=>({mode:a,...ms({mode:a})(n)}))}function Nu(e){const{key:t="wallet",name:s="Wallet Client",transport:a}=e;return Je({...e,key:t,name:s,transport:a,type:"walletClient"}).extend(Dt)}function Uu(e,t={}){const{keepAlive:s,key:a="webSocket",methods:r,name:n="WebSocket JSON-RPC",reconnect:i,retryDelay:u}=t;return({chain:c,retryCount:o,timeout:f})=>{var p;const l=t.retryCount??o,h=f??t.timeout??1e4,d=e||((p=c==null?void 0:c.rpcUrls.default.webSocket)==null?void 0:p[0]),m={keepAlive:s,reconnect:i};if(!d)throw new Gt;return zt({key:a,methods:r,name:n,async request({method:_,params:E}){const b={method:_,params:E},x=await ye(d,m),{error:C,result:v}=await x.requestAsync({body:b,timeout:h});if(C)throw new Vt({body:b,error:C,url:d});return v},retryCount:l,retryDelay:u,timeout:h,type:"webSocket"},{getSocket(){return Kc(d)},getRpcClient(){return ye(d,m)},async subscribe({params:_,onData:E,onError:b}){const x=await ye(d,m),{result:C}=await new Promise((v,w)=>x.request({body:{method:"eth_subscribe",params:_},onError(S){w(S),b==null||b(S)},onResponse(S){if(S.error){w(S.error),b==null||b(S.error);return}if(typeof S.id=="number"){v(S);return}S.method==="eth_subscription"&&E(S.params)}}));return{subscriptionId:C,async unsubscribe(){return new Promise(v=>x.request({body:{method:"eth_unsubscribe",params:[C]},onResponse:v}))}}}})}}class Du extends Error{constructor(t,s){super(s),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=s}}const Oe="/docs/contract/decodeDeployData";function Gu(e){const{abi:t,bytecode:s,data:a}=e;if(a===s)return{bytecode:s};const r=t.find(i=>"type"in i&&i.type==="constructor");if(!r)throw new $t({docsPath:Oe});if(!("inputs"in r))throw new Ne({docsPath:Oe});if(!r.inputs||r.inputs.length===0)throw new Ne({docsPath:Oe});return{args:We(r.inputs,`0x${a.replace(s,"")}`),bytecode:s}}function zu(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),s=typeof e.blobs[0]=="string"?e.blobs.map(u=>Y(u)):e.blobs,a=s.reduce((u,c)=>u+c.length,0),r=je(new Uint8Array(a));let n=!0;for(const u of s){const c=je(u);for(;n&&c.position<u.length;){c.incrementPosition(1);let o=31;u.length-c.position<31&&(o=u.length-c.position);for(const f in Array.from({length:o})){const l=c.readByte();if(l===128&&!c.inspectBytes(c.remaining).includes(128)){n=!1;break}r.pushByte(l)}}}const i=r.bytes.slice(0,r.position);return t==="hex"?D(i):i}function Vu(e){const{sidecars:t,version:s}=e,a=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),r=[];for(const{commitment:n}of t)r.push(Wt({commitment:n,to:a,version:s}));return r}const $u=2147483648;function Wu(e){if(e===1)return 60n;if(e>=$u||e<0)throw new Kt({chainId:e});return BigInt((2147483648|e)>>>0)}function gs({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function Ku(e,t){try{e.loadTrustedSetup(t)}catch(s){const a=s;if(!a.message.includes("trusted setup is already loaded"))throw a}return gs(e)}function Ju({r:e,yParityAndS:t}){const s=Y(t),a=s[0]&128?1:0,r=s;return a===1&&(r[0]&=127),{r:e,s:D(r),yParity:a}}function pt(e){const{r:t,s}=Jt.Signature.fromCompact(e.slice(2,130));return{r:g(t,{size:32}),yParityAndS:g(s,{size:32})}}async function Yu(e){const{serializedTransaction:t,signature:s}=e,a=hs(t),r=s??{r:a.r,s:a.s,v:a.v,yParity:a.yParity},n=es({...a,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await ae({hash:Z(n),signature:r})}function yt({r:e,yParityAndS:t}){return`0x${new Jt.Signature(I(e),I(t)).toCompactHex()}`}function Xu(e){const{r:t,s,v:a,yParity:r}=e,n=Number(r??a-27n);let i=s;if(n===1){const u=Y(s);u[0]|=128,i=D(u)}return{r:t,yParityAndS:i}}const Qu=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:$t,AbiConstructorParamsNotFoundError:Ne,AbiDecodingDataSizeInvalidError:js,AbiDecodingDataSizeTooSmallError:Fs,AbiDecodingZeroDataError:qs,AbiEncodingArrayLengthMismatchError:Ns,AbiEncodingBytesSizeMismatchError:Us,AbiEncodingLengthMismatchError:Ds,AbiErrorInputsNotFoundError:Gs,AbiErrorNotFoundError:zs,AbiErrorSignatureNotFoundError:Vs,AbiEventNotFoundError:$s,AbiEventSignatureEmptyTopicsError:Ws,AbiEventSignatureNotFoundError:Ks,AbiFunctionNotFoundError:Js,AbiFunctionOutputsNotFoundError:Ys,AbiFunctionSignatureNotFoundError:Xs,AccountStateConflictError:Qs,AtomicReadyWalletRejectedUpgradeError:Zs,AtomicityNotSupportedError:ea,BaseError:ve,BaseFeeScalarError:ta,BlockNotFoundError:sa,BundleFailedError:aa,BundleTooLargeError:ra,BytesSizeMismatchError:na,CallExecutionError:oa,ChainDisconnectedError:ia,ChainDoesNotSupportContract:ca,ChainMismatchError:ua,ChainNotFoundError:da,CircularReferenceError:la,ClientChainNotConfiguredError:fa,ContractFunctionExecutionError:ha,ContractFunctionRevertedError:ma,ContractFunctionZeroDataError:ga,CounterfactualDeploymentFailedError:pa,DecodeLogDataMismatch:ya,DecodeLogTopicsMismatch:ba,DuplicateIdError:_a,EIP1193ProviderRpcError:Du,Eip1559FeesNotSupportedError:xa,EnsAvatarInvalidNftUriError:wa,EnsAvatarUnsupportedNamespaceError:va,EnsAvatarUriResolutionError:Ea,EnsInvalidChainIdError:Kt,EstimateGasExecutionError:Sa,ExecutionRevertedError:Pa,FeeCapTooHighError:we,FeeCapTooLowError:Ia,FeeConflictError:Ta,FilterTypeNotSupportedError:Aa,HttpRequestError:Ca,InsufficientFundsError:Ra,IntegerOutOfRangeError:Ba,InternalRpcError:La,IntrinsicGasTooHighError:ka,IntrinsicGasTooLowError:Ma,InvalidAbiDecodingTypeError:Oa,InvalidAbiEncodingTypeError:Ha,InvalidAbiItemError:ja,InvalidAbiParameterError:St,InvalidAbiParametersError:Fa,InvalidAbiTypeParameterError:qa,InvalidAddressError:V,InvalidArrayError:Na,InvalidBytesBooleanError:Ua,InvalidChainIdError:te,InvalidDecimalNumberError:Da,InvalidDefinitionTypeError:Ga,InvalidDomainError:za,InvalidFunctionModifierError:Va,InvalidHexBooleanError:$a,InvalidHexValueError:kt,InvalidInputRpcError:Wa,InvalidLegacyVError:Ve,InvalidModifierError:Ka,InvalidParameterError:Ja,InvalidParamsRpcError:Ya,InvalidParenthesisError:Xa,InvalidPrimaryTypeError:Qa,InvalidRequestRpcError:Za,InvalidSerializableTransactionError:er,InvalidSerializedTransactionError:X,InvalidSerializedTransactionTypeError:Ft,InvalidSignatureError:tr,InvalidStorageKeySizeError:At,InvalidStructSignatureError:sr,InvalidStructTypeError:ar,JsonRpcVersionUnsupportedError:rr,LimitExceededRpcError:nr,MaxFeePerGasTooLowError:or,MethodNotFoundRpcError:ir,MethodNotSupportedRpcError:cr,NonceMaxValueError:ur,NonceTooHighError:dr,NonceTooLowError:lr,ParseRpcError:fr,ProviderDisconnectedError:hr,ProviderRpcError:mr,RawContractError:gr,ResourceNotFoundRpcError:pr,ResourceUnavailableRpcError:yr,RpcError:br,RpcRequestError:Vt,SizeExceedsPaddingSizeError:_r,SizeOverflowError:xr,SliceOffsetOutOfBoundsError:wr,SocketClosedError:ee,SolidityProtectedKeywordError:vr,StateAssignmentConflictError:Er,SwitchChainError:Sr,TimeoutError:Ot,TipAboveFeeCapError:Tt,TransactionExecutionError:Pr,TransactionNotFoundError:Ir,TransactionReceiptNotFoundError:Tr,TransactionRejectedRpcError:Ar,TransactionTypeNotSupportedError:Cr,UnauthorizedProviderError:Rr,UnknownBundleIdError:Br,UnknownNodeError:Lr,UnknownRpcError:kr,UnknownSignatureError:Mr,UnknownTypeError:Or,UnsupportedChainIdError:Hr,UnsupportedNonOptionalCapabilityError:jr,UnsupportedPackedAbiType:Fr,UnsupportedProviderMethodError:qr,UrlRequiredError:Gt,UserRejectedRequestError:Nr,WaitForCallsStatusTimeoutError:Ur,WaitForTransactionReceiptTimeoutError:Dr,WebSocketRequestError:Fe,assertCurrentChain:Gr,assertRequest:zr,assertTransactionEIP1559:re,assertTransactionEIP2930:Ye,assertTransactionLegacy:Xe,blobsToCommitments:Rt,blobsToProofs:Lt,boolToBytes:Vr,boolToHex:$r,bytesToBigInt:Wr,bytesToBool:Kr,bytesToHex:D,bytesToNumber:Jr,bytesToRlp:Yr,bytesToString:Xr,ccipFetch:ht,ccipRequest:ht,checksumAddress:Qr,commitmentToVersionedHash:Wt,commitmentsToVersionedHashes:Bt,compactSignatureToHex:yt,compactSignatureToSignature:Ju,concat:It,concatBytes:Zr,concatHex:se,createClient:Je,createNonceManager:bc,createPublicClient:en,createTestClient:qu,createTransport:zt,createWalletClient:Nu,custom:tn,decodeAbiParameters:We,decodeDeployData:Gu,decodeErrorResult:sn,decodeEventLog:an,decodeFunctionData:rn,decodeFunctionResult:nn,defineBlock:on,defineChain:cn,defineKzg:gs,defineTransaction:un,defineTransactionReceipt:dn,defineTransactionRequest:ln,deploylessCallViaBytecodeBytecode:fn,deploylessCallViaFactoryBytecode:hn,domainSeparator:mn,encodeAbiParameters:gn,encodeDeployData:pn,encodeErrorResult:yn,encodeEventTopics:bn,encodeFunctionData:_n,encodeFunctionResult:xn,encodePacked:_c,erc1155Abi:wn,erc20Abi:vn,erc20Abi_bytes32:En,erc4626Abi:Sn,erc6492SignatureValidatorAbi:ot,erc6492SignatureValidatorByteCode:it,erc721Abi:Pn,ethAddress:In,etherUnits:qt,extractChain:Oc,fallback:gc,formatBlock:Tn,formatEther:An,formatGwei:Cn,formatLog:Rn,formatTransaction:Bn,formatTransactionReceipt:Ln,formatTransactionRequest:Ut,formatUnits:kn,fromBlobs:zu,fromBytes:Mn,fromHex:On,fromRlp:Qe,getAbiItem:Hn,getAddress:N,getChainContractAddress:jn,getContract:Fn,getContractAddress:Ac,getContractError:qn,getCreate2Address:Xt,getCreateAddress:Yt,getEventSelector:ct,getEventSignature:fe,getFunctionSelector:ut,getFunctionSignature:fe,getSerializedTransactionType:fs,getTransactionType:Ct,getTypesForEIP712Domain:Nn,gweiUnits:Nt,hashDomain:Un,hashMessage:Ht,hashStruct:Dn,hashTypedData:jt,hexToBigInt:I,hexToBool:Gn,hexToBytes:Y,hexToCompactSignature:pt,hexToNumber:B,hexToRlp:zn,hexToSignature:ft,hexToString:Vn,http:$n,isAddress:z,isAddressEqual:Ee,isBytes:Ue,isErc6492Signature:cs,isErc8010Signature:us,isHash:ss,isHex:y,keccak256:Z,labelhash:Wn,maxInt104:Kn,maxInt112:Jn,maxInt120:Yn,maxInt128:Xn,maxInt136:Qn,maxInt144:Zn,maxInt152:eo,maxInt16:to,maxInt160:so,maxInt168:ao,maxInt176:ro,maxInt184:no,maxInt192:oo,maxInt200:io,maxInt208:co,maxInt216:uo,maxInt224:lo,maxInt232:fo,maxInt24:ho,maxInt240:mo,maxInt248:go,maxInt256:po,maxInt32:yo,maxInt40:bo,maxInt48:_o,maxInt56:xo,maxInt64:wo,maxInt72:vo,maxInt8:Eo,maxInt80:So,maxInt88:Po,maxInt96:Io,maxUint104:To,maxUint112:Ao,maxUint120:Co,maxUint128:Ro,maxUint136:Bo,maxUint144:Lo,maxUint152:ko,maxUint16:Mo,maxUint160:Oo,maxUint168:Ho,maxUint176:jo,maxUint184:Fo,maxUint192:qo,maxUint200:No,maxUint208:Uo,maxUint216:Do,maxUint224:Go,maxUint232:zo,maxUint24:Vo,maxUint240:$o,maxUint248:Wo,maxUint256:xe,maxUint32:Ko,maxUint40:Jo,maxUint48:Yo,maxUint56:Xo,maxUint64:Qo,maxUint72:Zo,maxUint8:ei,maxUint80:ti,maxUint88:si,maxUint96:ai,minInt104:ri,minInt112:ni,minInt120:oi,minInt128:ii,minInt136:ci,minInt144:ui,minInt152:di,minInt16:li,minInt160:fi,minInt168:hi,minInt176:mi,minInt184:gi,minInt192:pi,minInt200:yi,minInt208:bi,minInt216:_i,minInt224:xi,minInt232:wi,minInt24:vi,minInt240:Ei,minInt248:Si,minInt256:Pi,minInt32:Ii,minInt40:Ti,minInt48:Ai,minInt56:Ci,minInt64:Ri,minInt72:Bi,minInt8:Li,minInt80:ki,minInt88:Mi,minInt96:Oi,multicall3Abi:Hi,namehash:ji,nonceManager:xc,numberToBytes:Fi,numberToHex:g,offchainLookup:Ec,offchainLookupAbiItem:Sc,offchainLookupSignature:Pc,pad:Pt,padBytes:qi,padHex:qe,parseAbi:Ni,parseAbiItem:Ui,parseAbiParameter:Tc,parseAbiParameters:Di,parseCompactSignature:pt,parseErc6492Signature:Jc,parseErc8010Signature:Yc,parseEther:iu,parseEventLogs:Gi,parseGwei:cu,parseSignature:ft,parseTransaction:hs,parseUnits:Ke,prepareEncodeFunctionData:zi,presignMessagePrefix:Vi,publicActions:$i,recoverAddress:ae,recoverMessageAddress:ds,recoverPublicKey:Wi,recoverTransactionAddress:Yu,recoverTypedDataAddress:ls,ripemd160:$c,rpcSchema:Ki,rpcTransactionType:Ji,serializeAccessList:ne,serializeCompactSignature:yt,serializeErc6492Signature:wc,serializeErc8010Signature:Xc,serializeSignature:dt,serializeTransaction:es,serializeTypedData:Yi,setErrorConfig:Xi,setupKzg:Ku,sha256:Qi,shouldThrow:pc,sidecarsToVersionedHashes:Vu,signatureToCompactSignature:Xu,signatureToHex:dt,size:Ge,slice:De,sliceBytes:Zi,sliceHex:$e,stringToBytes:ec,stringToHex:tc,stringify:sc,testActions:ms,toBlobSidecars:ze,toBlobs:ac,toBytes:q,toCoinType:Wu,toEventHash:lt,toEventSelector:ct,toEventSignature:fe,toFunctionHash:lt,toFunctionSelector:ut,toFunctionSignature:fe,toHex:be,toPrefixedMessage:rc,toRlp:U,transactionType:nc,trim:W,universalSignatureValidatorAbi:ot,universalSignatureValidatorByteCode:it,validateTypedData:oc,verifyHash:Qc,verifyMessage:Zc,verifyTypedData:eu,walletActions:Dt,webSocket:Uu,weiUnits:ic,withCache:cc,withRetry:uc,withTimeout:Mt,zeroAddress:dc,zeroHash:vc},Symbol.toStringTag,{value:"Module"}));var Ze={},Ie={},ps={},_e={},ys={},ce={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.getSDKVersion=void 0;const Zu=()=>"9.1.0";ue.getSDKVersion=Zu;var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.generateRequestId=void 0;const ed=e=>e.toString(16).padStart(2,"0"),td=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,ed).join("")},sd=()=>typeof window<"u"?td(10):new Date().getTime().toString(36);Te.generateRequestId=sd;Object.defineProperty(ce,"__esModule",{value:!0});ce.MessageFormatter=void 0;const ad=ue,rd=Te;class Ae{}ce.MessageFormatter=Ae;Ae.makeRequest=(e,t)=>({id:(0,rd.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,ad.getSDKVersion)()}});Ae.makeResponse=(e,t,s)=>({id:e,success:!0,version:s,data:t});Ae.makeErrorResponse=(e,t,s)=>({id:e,success:!1,error:t,version:s});var H={};Object.defineProperty(H,"__esModule",{value:!0});H.RestrictedMethods=H.Methods=void 0;var bt;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(bt||(H.Methods=bt={}));var _t;(function(e){e.requestAddressBook="requestAddressBook"})(_t||(H.RestrictedMethods=_t={}));(function(e){var t=A&&A.__createBinding||(Object.create?function(n,i,u,c){c===void 0&&(c=u);var o=Object.getOwnPropertyDescriptor(i,u);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[u]}}),Object.defineProperty(n,c,o)}:function(n,i,u,c){c===void 0&&(c=u),n[c]=i[u]}),s=A&&A.__exportStar||function(n,i){for(var u in n)u!=="default"&&!Object.prototype.hasOwnProperty.call(i,u)&&t(i,n,u)};Object.defineProperty(e,"__esModule",{value:!0});const a=ce;class r{constructor(i=null,u=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:c,data:o,source:f})=>{const l=!o,h=!this.isServer&&f===window.parent,d=typeof o.version<"u"&&parseInt(o.version.split(".")[0]),m=typeof d=="number"&&d>=1;let p=!0;return Array.isArray(this.allowedOrigins)&&(p=this.allowedOrigins.find(_=>_.test(c))!==void 0),!l&&h&&m&&p},this.logIncomingMessage=c=>{console.info(`Safe Apps SDK v1: A message was received from origin ${c.origin}. `,c.data)},this.onParentMessage=c=>{this.isValidMessage(c)&&(this.debugMode&&this.logIncomingMessage(c),this.handleIncomingMessage(c.data))},this.handleIncomingMessage=c=>{const{id:o}=c,f=this.callbacks.get(o);f&&(f(c),this.callbacks.delete(o))},this.send=(c,o)=>{const f=a.MessageFormatter.makeRequest(c,o);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(f,"*"),new Promise((l,h)=>{this.callbacks.set(f.id,d=>{if(!d.success){h(new Error(d.error));return}l(d)})})},this.allowedOrigins=i,this.debugMode=u,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=r,s(H,e)})(ys);var Ce={},Re={},Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.isObjectEIP712TypedData=void 0;const nd=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;Be.isObjectEIP712TypedData=nd;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});var _s={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=mc;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(_s);var xs={};Object.defineProperty(xs,"__esModule",{value:!0});(function(e){var t=A&&A.__createBinding||(Object.create?function(a,r,n,i){i===void 0&&(i=n);var u=Object.getOwnPropertyDescriptor(r,n);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(a,i,u)}:function(a,r,n,i){i===void 0&&(i=n),a[i]=r[n]}),s=A&&A.__exportStar||function(a,r){for(var n in a)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&t(r,a,n)};Object.defineProperty(e,"__esModule",{value:!0}),s(Be,e),s(bs,e),s(_s,e),s(xs,e)})(Re);Object.defineProperty(Ce,"__esModule",{value:!0});Ce.TXs=void 0;const me=H,od=Re;class id{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(me.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const s={message:t};return(await this.communicator.send(me.Methods.signMessage,s)).data}async signTypedMessage(t){if(!(0,od.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(me.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:s}){if(!t||!t.length)throw new Error("No transactions were passed");const a={txs:t,params:s};return(await this.communicator.send(me.Methods.sendTransactions,a)).data}}Ce.TXs=id;var Le={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.RPC_CALLS=void 0;Q.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Le,"__esModule",{value:!0});Le.Eth=void 0;const k=Q,cd=H,j={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class ud{constructor(t){this.communicator=t,this.call=this.buildRequest({call:k.RPC_CALLS.eth_call,formatters:[null,j.defaultBlockParam]}),this.getBalance=this.buildRequest({call:k.RPC_CALLS.eth_getBalance,formatters:[null,j.defaultBlockParam]}),this.getCode=this.buildRequest({call:k.RPC_CALLS.eth_getCode,formatters:[null,j.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:k.RPC_CALLS.eth_getStorageAt,formatters:[null,j.blockNumberToHex,j.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:k.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByHash,formatters:[null,j.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:k.RPC_CALLS.eth_getBlockByNumber,formatters:[j.blockNumberToHex,j.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:k.RPC_CALLS.eth_getTransactionCount,formatters:[null,j.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:k.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=s=>this.buildRequest({call:k.RPC_CALLS.eth_estimateGas})([s]),this.setSafeSettings=this.buildRequest({call:k.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:s,formatters:a}=t;return async r=>{a&&Array.isArray(r)&&a.forEach((u,c)=>{u&&(r[c]=u(r[c]))});const n={call:s,params:r||[]};return(await this.communicator.send(cd.Methods.rpcCall,n)).data}}}Le.Eth=ud;var ke={};const dd=lc(Qu);var K={};Object.defineProperty(K,"__esModule",{value:!0});K.MAGIC_VALUE_BYTES=K.MAGIC_VALUE=void 0;const ld="0x1626ba7e";K.MAGIC_VALUE=ld;const fd="0x20c13b0b";K.MAGIC_VALUE_BYTES=fd;var et={},de={},G={};Object.defineProperty(G,"__esModule",{value:!0});G.PermissionsError=G.PERMISSIONS_REQUEST_REJECTED=void 0;G.PERMISSIONS_REQUEST_REJECTED=4001;class tt extends Error{constructor(t,s,a){super(t),this.code=s,this.data=a,Object.setPrototypeOf(this,tt.prototype)}}G.PermissionsError=tt;Object.defineProperty(de,"__esModule",{value:!0});de.Wallet=void 0;const He=H,ge=G;class hd{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(He.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new ge.PermissionsError("Permissions request is invalid",ge.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(He.Methods.wallet_requestPermissions,t)).data}catch{throw new ge.PermissionsError("Permissions rejected",ge.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(s=>typeof s=="object"?Object.keys(s).every(a=>!!Object.values(He.RestrictedMethods).includes(a)):!1)}}de.Wallet=hd;Object.defineProperty(et,"__esModule",{value:!0});const md=de,xt=G,wt=(e,t)=>t.some(s=>s.parentCapability===e),gd=()=>(e,t,s)=>{const a=s.value;return s.value=async function(){const r=new md.Wallet(this.communicator);let n=await r.getPermissions();if(wt(t,n)||(n=await r.requestPermissions([{[t]:{}}])),!wt(t,n))throw new xt.PermissionsError("Permissions rejected",xt.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},s};et.default=gd;var pd=A&&A.__decorate||function(e,t,s,a){var r=arguments.length,n=r<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,s,a);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(n=(r<3?i(n):r>3?i(t,s,n):i(t,s))||n);return r>3&&n&&Object.defineProperty(t,s,n),n},yd=A&&A.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0});ke.Safe=void 0;const pe=dd,vt=K,F=H,Et=Q,bd=Re,_d=yd(et);class ws{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(F.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(F.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(F.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,s="0x"){const a=await this.getInfo(),r=(0,pe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),n={call:Et.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:r},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,n)).data.slice(0,10).toLowerCase()===vt.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,s="0x"){const a=await this.getInfo(),r=(0,pe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),n={call:Et.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:r},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,n)).data.slice(0,10).toLowerCase()===vt.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,pe.hashMessage)(t)}calculateTypedMessageHash(t){const s=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let a=t.primaryType;if(!a){const r=Object.values(t.types),n=Object.keys(t.types).filter(i=>r.every(u=>u.every(({type:c})=>c.replace("[","").replace("]","")!==i)));if(n.length===0||n.length>1)throw new Error("Please specify primaryType");a=n[0]}return(0,pe.hashTypedData)({message:t.message,domain:{...t.domain,chainId:s,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:a})}async getOffChainSignature(t){return(await this.communicator.send(F.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,s="0x"){let a;if(typeof t=="string"&&(a=async()=>{const r=this.calculateMessageHash(t);return await this.isMessageHashSigned(r,s)}),(0,bd.isObjectEIP712TypedData)(t)&&(a=async()=>{const r=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(r,s)}),a)return await a();throw new Error("Invalid message type")}async isMessageHashSigned(t,s="0x"){const a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const r of a)if(await r(t,s))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(F.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(F.Methods.requestAddressBook,void 0)).data}}ke.Safe=ws;pd([(0,_d.default)()],ws.prototype,"requestAddressBook",null);var xd=A&&A.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});const wd=xd(ys),vd=Ce,Ed=Le,Sd=ke,Pd=de;class Id{constructor(t={}){const{allowedDomains:s=null,debug:a=!1}=t;this.communicator=new wd.default(s,a),this.eth=new Ed.Eth(this.communicator),this.txs=new vd.TXs(this.communicator),this.safe=new Sd.Safe(this.communicator),this.wallet=new Pd.Wallet(this.communicator)}}_e.default=Id;(function(e){var t=A&&A.__createBinding||(Object.create?function(i,u,c,o){o===void 0&&(o=c);var f=Object.getOwnPropertyDescriptor(u,c);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(i,o,f)}:function(i,u,c,o){o===void 0&&(o=c),i[o]=u[c]}),s=A&&A.__exportStar||function(i,u){for(var c in i)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&t(u,i,c)},a=A&&A.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const r=a(_e);e.default=r.default,s(_e,e),s(Re,e),s(H,e),s(ce,e);var n=ue;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return n.getSDKVersion}}),s(Q,e)})(ps);var J={};Object.defineProperty(J,"__esModule",{value:!0});J.numberToHex=J.getLowerCase=void 0;function Td(e){return e&&e.toLowerCase()}J.getLowerCase=Td;function Ad(e){return`0x${e.toString(16)}`}J.numberToHex=Ad;Object.defineProperty(Ie,"__esModule",{value:!0});Ie.SafeAppProvider=void 0;const $=ps,Cd=fc,O=J;class Rd extends Cd.EventEmitter{constructor(t,s){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=s}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var r,n,i,u;const{method:s,params:a=[]}=t;switch(s){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,O.numberToHex)(this.chainId);case"personal_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(d);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,d]=a,m=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const p=await this.sdk.txs.signTypedMessage(m);return("signature"in p?p.signature:void 0)||"0x"}case"eth_sendTransaction":const c={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof c.gas=="string"&&c.gas.startsWith("0x")&&(c.gas=parseInt(c.gas,16));const o=await this.sdk.txs.send({txs:[c],params:{safeTxGas:c.gas}});return this.submittedTxs.set(o.safeTxHash,{from:this.safe.safeAddress,hash:o.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:c.data,value:c.value,to:c.to,blockHash:null,blockNumber:null,transactionIndex:null}),o.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,O.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,O.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,O.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,O.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let l=a[0];try{l=(await this.sdk.txs.getBySafeTxHash(l)).txHash||l}catch{}return this.submittedTxs.has(l)?this.submittedTxs.get(l):this.sdk.eth.getTransactionByHash([l]).then(h=>(h&&(h.hash=a[0]),h));case"eth_getTransactionReceipt":{let h=a[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(d=>(d&&(d.transactionHash=a[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:h,calls:d,chainId:m}=a[0];if(m!==(0,O.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const p=d.map((b,x)=>{if(!b.to)throw new Error(`Invalid call #${x}: missing "to" field`);return{to:b.to,data:b.data??"0x",value:b.value??(0,O.numberToHex)(0)}}),{safeTxHash:_}=await this.sdk.txs.send({txs:p});return{id:_}}case"wallet_getCallsStatus":{const h=a[0],d={[$.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[$.TransactionStatus.AWAITING_EXECUTION]:100,[$.TransactionStatus.SUCCESS]:200,[$.TransactionStatus.CANCELLED]:400,[$.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),p={version:"1.0",id:h,chainId:(0,O.numberToHex)(this.chainId),status:d[m.txStatus]};if(!m.txHash)return p;const _=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!_)return p;const E=((n=(r=m.txData)==null?void 0:r.dataDecoded)==null?void 0:n.method)!=="multiSend"?1:((u=(i=m.txData.dataDecoded.parameters)==null?void 0:i[0].valueDecoded)==null?void 0:u.length)??1,b=Number(_.blockNumber),x=Number(_.gasUsed);return p.receipts=Array(E).fill({logs:_.logs,status:(0,O.numberToHex)(m.txStatus===$.TransactionStatus.SUCCESS?1:0),blockHash:_.blockHash,blockNumber:(0,O.numberToHex)(b),gasUsed:(0,O.numberToHex)(x),transactionHash:m.txHash}),p}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,O.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,s){t||s("Undefined request"),this.request(t).then(a=>s(null,{jsonrpc:"2.0",id:t.id,result:a})).catch(a=>s(a,null))}}Ie.SafeAppProvider=Rd;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=Ie;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(Ze);const Bd=hc(Ze),jd=Ic({__proto__:null,default:Bd},[Ze]);export{jd as i};
