import{A as b,k as y,m as w,I as x,p as d,n as z,o as M,q as k,r as f,t as T,u as E,v as L,x as N,L as P,y as S,f as A,z as B,C}from"./index-7mnBBBHP.js";function $(t,e){if(t.length!==e.length)throw new b({expectedLength:t.length,givenLength:e.length});const o=[];for(let n=0;n<t.length;n++){const g=t[n],i=e[n];o.push(m(g,i))}return y(o)}function m(t,e,o=!1){if(t==="address"){const s=e;if(!w(s))throw new x({address:s});return d(s.toLowerCase(),{size:o?32:null})}if(t==="string")return z(e);if(t==="bytes")return e;if(t==="bool")return d(M(e),{size:o?32:1});const n=t.match(k);if(n){const[s,r,a="256"]=n,c=Number.parseInt(a,10)/8;return f(e,{size:o?32:c,signed:r==="int"})}const g=t.match(T);if(g){const[s,r]=g;if(Number.parseInt(r,10)!==(e.length-2)/2)throw new E({expectedSize:Number.parseInt(r,10),givenSize:(e.length-2)/2});return d(e,{dir:"right",size:o?32:null})}const i=t.match(L);if(i&&Array.isArray(e)){const[s,r]=i,a=[];for(let c=0;c<e.length;c++)a.push(m(r,e[c],!0));return a.length===0?"0x":y(a)}throw new N(t)}function H(t){const{source:e}=t,o=new Map,n=new P(8192),g=new Map,i=({address:s,chainId:r})=>`${s}.${r}`;return{async consume({address:s,chainId:r,client:a}){const c=i({address:s,chainId:r}),u=this.get({address:s,chainId:r,client:a});this.increment({address:s,chainId:r});const h=await u;return await e.set({address:s,chainId:r},h),n.set(c,h),h},async increment({address:s,chainId:r}){const a=i({address:s,chainId:r}),c=o.get(a)??0;o.set(a,c+1)},async get({address:s,chainId:r,client:a}){const c=i({address:s,chainId:r});let u=g.get(c);return u||(u=(async()=>{try{const l=await e.get({address:s,chainId:r,client:a}),p=n.get(c)??0;return p>0&&l<=p?p+1:(n.delete(c),l)}finally{this.reset({address:s,chainId:r})}})(),g.set(c,u)),(o.get(c)??0)+await u},reset({address:s,chainId:r}){const a=i({address:s,chainId:r});o.delete(a),g.delete(a)}}}function R(){return{async get(t){const{address:e,client:o}=t;return S(o,{address:e,blockTag:"pending"})},set(){}}}const O=H({source:R()}),_="0x6492649264926492649264926492649264926492649264926492649264926492",V="0x0000000000000000000000000000000000000000000000000000000000000000";function j(t){const{address:e,data:o,signature:n,to:g="hex"}=t,i=y([A([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,o,n]),_]);return g==="hex"?i:B(i)}function q(t){const{r:e,s:o}=C.Signature.fromCompact(t.slice(2,130)),n=+`0x${t.slice(130)}`,[g,i]=(()=>{if(n===0||n===1)return[void 0,n];if(n===27)return[BigInt(n),0];if(n===28)return[BigInt(n),1];throw new Error("Invalid yParityOrV value")})();return typeof g<"u"?{r:f(e,{size:32}),s:f(o,{size:32}),v:g,yParity:i}:{r:f(e,{size:32}),s:f(o,{size:32}),yParity:i}}export{$ as a,H as c,_ as e,O as n,q as p,j as s,V as z};
